(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{429:function(e,a,t){"use strict";t.r(a);var s=t(56),r=Object(s.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"using-java-with-nubesgen"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#using-java-with-nubesgen"}},[e._v("#")]),e._v(" Using Java with NubesGen")]),e._v(" "),t("p",[e._v("This documentation is for running Java applications with NubesGen. There are three other options that might interest you:")]),e._v(" "),t("ul",[t("li",[e._v("You can use "),t("RouterLink",{attrs:{to:"/runtimes/spring-boot/"}},[e._v("Spring Boot with NubesGen")]),e._v(", which is similar to Java, but uses the specific Spring Boot application properties.")],1),e._v(" "),t("li",[e._v("You can use "),t("RouterLink",{attrs:{to:"/runtimes/quarkus/"}},[e._v("Quarkus with NubesGen")]),e._v(", which uses the specific Quarkus application properties.")],1),e._v(" "),t("li",[e._v("As Java applications can be packaged with Docker, you can also run them as "),t("RouterLink",{attrs:{to:"/runtimes/docker/"}},[e._v("Docker applications with NubesGen")]),e._v(".")],1)]),e._v(" "),t("p",[e._v("NubesGen supports creating Azure App Service instances and Azure Functions instances, depending on the type of Java application that you wish to deploy.")]),e._v(" "),t("h2",{attrs:{id:"tutorial-running-a-java-application-with-nubesgen"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tutorial-running-a-java-application-with-nubesgen"}},[e._v("#")]),e._v(" Tutorial: running a Java application with NubesGen")]),e._v(" "),t("p",[t("strong",[e._v("Prerequisites:")])]),e._v(" "),t("p",[t("em",[e._v("Tip: You can go to "),t("a",{attrs:{href:"https://aka.ms/nubesgen-azure-shell",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://aka.ms/nubesgen-azure-shell"),t("OutboundLink")],1),e._v(" to have those prerequisites installed, and run the script from a Web browser.")])]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://fr.wikipedia.org/wiki/Bourne-Again_shell",target:"_blank",rel:"noopener noreferrer"}},[e._v("Bash"),t("OutboundLink")],1),e._v(", which is installed by default on most Linux distributions and on Mac OS X. If you're using Windows, one solution is to use "),t("a",{attrs:{href:"https://aka.ms/nubesgen-install-wsl",target:"_blank",rel:"noopener noreferrer"}},[e._v("WSL"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("li",[t("a",{attrs:{href:"https://aka.ms/nubesgen-install-az-cli",target:"_blank",rel:"noopener noreferrer"}},[e._v("Azure CLI"),t("OutboundLink")],1),e._v(". To login, use "),t("code",[e._v("az login")]),e._v(".")]),e._v(" "),t("li",[e._v("(optional) "),t("a",{attrs:{href:"https://cli.github.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("GitHub CLI"),t("OutboundLink")],1),e._v(". To login, use "),t("code",[e._v("gh auth login")]),e._v(".")])]),e._v(" "),t("p",[t("strong",[e._v("Steps:")])]),e._v(" "),t("ol",[t("li",[e._v("Create a sample Java Web application using "),t("a",{attrs:{href:"https://start.spring.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://start.spring.io/"),t("OutboundLink")],1),e._v("."),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" https://start.spring.io/starter.tgz?type"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("maven-project"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("&")]),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("language")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("java"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("&")]),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("bootVersion")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("3.1")]),e._v(".3"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("&")]),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("baseDir")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("java-sample-app"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("&")]),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("groupId")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("com.example"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("&")]),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("java-sample-app"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("&")]),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("name")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("java-sample-app"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("&")]),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("Demo%20project%20for%20Spring%20Boot"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("&")]),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("packageName")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("com.example.java-sample-app"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("&")]),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("packaging")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("jar"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("&")]),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("javaVersion")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("17")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("&")]),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("dependencies")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("web "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("tar")]),e._v(" -xzvf -\n")])])])]),e._v(" "),t("li",[e._v("Create a project on GitHub called "),t("code",[e._v("java-sample-app")]),e._v(", and push the generated project to that repository. Change "),t("code",[e._v("<your-github-account>")]),e._v(" to the name of your GitHub account:"),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" java-sample-app\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" init\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("add")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(".")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" commit -m "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"first commit"')]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" remote "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("add")]),e._v(" origin https://github.com/"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("your-github-account"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("/java-sample-app.git\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" branch -M main\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" push -u origin main\n")])])])]),e._v(" "),t("li",[e._v("In the cloned project ("),t("code",[e._v("cd java-sample-app")]),e._v("), set up GitOps with NubesGen by running the NubesGen CLI ("),t("RouterLink",{attrs:{to:"/gitops/gitops-quick-start/"}},[e._v("more information here")]),e._v("):"),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v(" ./nubesgen-cli-linux gitops\n")])])])],1),e._v(" "),t("li",[e._v("Use the command-line with NubesGen ("),t("RouterLink",{attrs:{to:"/reference/rest-api/"}},[e._v("more information here")]),e._v(") to generate a NubesGen configuration:"),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"https://nubesgen.com/demo.tgz?runtime=java&application=app_service.standard&gitops=true"')]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("tar")]),e._v(" -xzvf -\n")])])])],1),e._v(" "),t("li",[e._v("Create a new branch called "),t("code",[e._v("env-dev")]),e._v(", and push your code:"),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" checkout -b env-dev\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("add")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(".")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" commit -m "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'Configure GitOps with NubesGen'")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" push --set-upstream origin env-dev\n")])])])]),e._v(" "),t("li",[e._v("Go to your GitHub project, and check that the GitHub Action is running.")]),e._v(" "),t("li",[e._v("You can go to the "),t("a",{attrs:{href:"https://aka.ms/nubesgen-portal",target:"_blank",rel:"noopener noreferrer"}},[e._v("Azure Portal"),t("OutboundLink")],1),e._v(" to check the created resources.")]),e._v(" "),t("li",[e._v("The application should be deployed on your App Service instance. Its URL should be in the form "),t("code",[e._v("https://app-demo-XXXX-XXXX-XXXX-XXXX-dev-001.azurewebsites.net/")]),e._v(', and you can also find it in the GitHub Action workflow (Job: "display-information", step "Display Azure infrastructure information"), or in the Azure portal.\nAs it is an empty application, you should get 404 page called '),t("code",[e._v("Whitelabel Error Page")]),e._v(".")]),e._v(" "),t("li",[e._v("Once you have finished, you should clean up your resources:\n"),t("ol",[t("li",[e._v("Delete the resource group that was created by NubesGen to host your resources, which is named "),t("code",[e._v("rg-demo-XXXX-XXXX-XXXX-XXXX-001")]),e._v(".")]),e._v(" "),t("li",[e._v("Delete the storage account used to store your Terraform state, in the "),t("code",[e._v("rg-terraform-001")]),e._v(" resource group.")])])])]),e._v(" "),t("h2",{attrs:{id:"which-azure-resources-are-created"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#which-azure-resources-are-created"}},[e._v("#")]),e._v(" Which Azure resources are created")]),e._v(" "),t("p",[e._v("If you deploy your Java application to an Azure App Service instance, NubesGen will generate:")]),e._v(" "),t("ul",[t("li",[e._v("An "),t("a",{attrs:{href:"https://aka.ms/nubesgen-app-service-plans",target:"_blank",rel:"noopener noreferrer"}},[e._v("Azure App Service plan"),t("OutboundLink")],1),e._v(" to define the type of App Service instance you will use.")]),e._v(" "),t("li",[e._v("An "),t("a",{attrs:{href:"https://aka.ms/nubesgen-app-service",target:"_blank",rel:"noopener noreferrer"}},[e._v("Azure App Service instance"),t("OutboundLink")],1),e._v(", configured to run Java code natively.")])]),e._v(" "),t("p",[e._v("If you deploy your Java application to an Azure Function, NubesGen will generate:")]),e._v(" "),t("ul",[t("li",[e._v("An "),t("a",{attrs:{href:"https://aka.ms/nubesgen-app-service-plans",target:"_blank",rel:"noopener noreferrer"}},[e._v("Azure App Service plan"),t("OutboundLink")],1),e._v(" to define the type of Azure Functions instance you will use.")]),e._v(" "),t("li",[e._v("An "),t("a",{attrs:{href:"https://aka.ms/nubesgen-functions",target:"_blank",rel:"noopener noreferrer"}},[e._v("Azure Functions instance"),t("OutboundLink")],1),e._v(", configured to run Java code natively.")]),e._v(" "),t("li",[e._v("An "),t("a",{attrs:{href:"https://aka.ms/nubesgen-storage",target:"_blank",rel:"noopener noreferrer"}},[e._v("Azure Storage Account"),t("OutboundLink")],1),e._v(", to store your Java application.")])]),e._v(" "),t("h2",{attrs:{id:"maven-vs-gradle"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#maven-vs-gradle"}},[e._v("#")]),e._v(" Maven vs Gradle")]),e._v(" "),t("p",[e._v("NubesGen supports both Maven and Gradle, so you can use the build system you prefer.")]),e._v(" "),t("h2",{attrs:{id:"configuration-options"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configuration-options"}},[e._v("#")]),e._v(" Configuration options")]),e._v(" "),t("p",[e._v("In the generated "),t("code",[e._v("terraform/modules/app-service/main.tf")]),e._v(" file, NubesGen will configure some environment variables\nfor your application.")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("DATABASE_URL")]),e._v(": the URL to your database")]),e._v(" "),t("li",[t("code",[e._v("DATABASE_USERNAME")]),e._v(": the database user name")]),e._v(" "),t("li",[t("code",[e._v("DATABASE_PASSWORD")]),e._v(": the database password")]),e._v(" "),t("li",[t("code",[e._v("REDIS_HOST")]),e._v(": the Redis host name")]),e._v(" "),t("li",[t("code",[e._v("REDIS_PASSWORD")]),e._v(": the Redis password")]),e._v(" "),t("li",[t("code",[e._v("REDIS_PORT")]),e._v(": the Redis port (by default "),t("code",[e._v("6380")]),e._v(")")]),e._v(" "),t("li",[t("code",[e._v("AZURE_STORAGE_ACCOUNT_NAME")]),e._v(": the storage account name")]),e._v(" "),t("li",[t("code",[e._v("AZURE_STORAGE_ACCOUNT_KEY")]),e._v(": the storage account key")]),e._v(" "),t("li",[t("code",[e._v("AZURE_STORAGE_BLOB_ENDPOINT")]),e._v(": the blob storage endpoint")]),e._v(" "),t("li",[t("code",[e._v("MONGODB_DATABASE")]),e._v(": the MongoDB database name")]),e._v(" "),t("li",[t("code",[e._v("MONGODB_URI")]),e._v(": the MongoDB database URL")])])])}),[],!1,null,null,null);a.default=r.exports}}]);